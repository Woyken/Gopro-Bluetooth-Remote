var it=Object.defineProperty;var ve=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var fe=(t,e,i)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,W=(t,e)=>{for(var i in e||(e={}))at.call(e,i)&&fe(t,i,e[i]);if(ve)for(var i of ve(e))st.call(e,i)&&fe(t,i,e[i]);return t};import{t as ye,u as we,j as h,B as $,a,T as M,b as c,r as T,c as H,d as Se,e as n,f as ot,g as nt,h as lt,F as K,C as k,P as ae,D as rt,i as ct,k as dt,I as ut,S as pt,M as ht,l as se,m as bt,n as gt,o as mt,p as vt,q as ft,s as yt,v as wt,w as St,x as Ct,y as Pt,z as Lt,R as Dt}from"./vendor.d712088e.js";const At=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=i(o);fetch(o.href,d)}};At();const{makeStyles:z,withStyles:so}=ye.createMakeAndWithStyles({useTheme:we}),Mt=z()({flexContent:{display:"flex",flexDirection:"row"}}),Tt=t=>{const{classes:e}=Mt(),i=()=>{t.updateServiceWorker(!0)};return h($,{className:e.flexContent,children:[a(M,{variant:"body1",children:"App was updated, reload to see the changes"}),a(c,{style:{display:"inline"},onClick:i,children:"Reload"})]})},kt="modulepreload",Ce={},Rt="/Gopro-Bluetooth-Remote/",xt=function(e,i){return!i||i.length===0?e():Promise.all(i.map(s=>{if(s=`${Rt}${s}`,s in Ce)return;Ce[s]=!0;const o=s.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${d}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":kt,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((p,m)=>{l.addEventListener("load",p),l.addEventListener("error",m)})})).then(()=>e())};function Ot(){const[t,e]=T.exports.useState();return T.exports.useEffect(()=>{xt(()=>import("./react.58b5f2ed.js"),["assets/react.58b5f2ed.js","assets/vendor.d712088e.js"]).then(e)},[e]),t}const Bt=60*60*1e3,It=()=>{const t=Ot();return t?a(Vt,{pwaRegisterModule:t}):null},Vt=({pwaRegisterModule:t})=>{const{offlineReady:[e],needRefresh:[i],updateServiceWorker:s}=t.useRegisterSW({immediate:!0,onRegistered(o){console.log("SW registered",o),!!o&&setInterval(()=>{o.update()},Bt)},onRegisterError(o){console.log("SW registration error",o)}});return T.exports.useEffect(()=>{e&&H("App was installed and now will work offline")},[e]),T.exports.useEffect(()=>{i&&H(a(Tt,{updateServiceWorker:s}),{autoClose:!1})},[i,s]),a("div",{})},g={};function Et(t){return e=>{const i=Nt(e);Ft(t,i)}}function Gt(t){switch(t){case 0:return R.success;case 1:return R.error;case 2:return R.invalidParameter;default:return R.unknown}}var R;(function(t){t[t.unknown=0]="unknown",t[t.success=1]="success",t[t.error=2]="error",t[t.invalidParameter=3]="invalidParameter"})(R||(R={}));function Nt(t){if(t.length<2)throw new Error("command response too short");const e=t[0],i=Gt(t[1]),s=t.slice(2);return{commandId:e,errorCode:i,data:s}}var Pe;(function(t){t[t.SetShutter=1]="SetShutter",t[t.Sleep=5]="Sleep",t[t.APControl=23]="APControl",t[t.GetHardwareInfo=60]="GetHardwareInfo",t[t.PresetsLoadGroup=62]="PresetsLoadGroup",t[t.PresetsLoad=64]="PresetsLoad",t[t.Analytics=80]="Analytics",t[t.OpenGoProGetVersion=81]="OpenGoProGetVersion"})(Pe||(Pe={}));function Ft(t,e){switch(e.commandId){case 60:{if(e.errorCode===2){t(ue());break}t(q.actions.getHardwareInfoResponse(_t(e)));break}case 81:{if(e.errorCode===2){t(pe());break}if(e.errorCode===3){t(q.actions.openGoProGetVersionResponse({majorVersion:0,minorVersion:0}));break}t(q.actions.openGoProGetVersionResponse(Wt(e)));break}}}function _t(t){const{data:e}=t;let i=0;const s=e[i++],o=new Array(s).fill(0).map(()=>e[i++]),d=e[i++],l=new Array(d).fill(0).map(()=>String.fromCharCode(e[i++])).join(""),p=e[i++],m=new Array(p).fill(0).map(()=>String.fromCharCode(e[i++])).join(""),f=e[i++],V=new Array(f).fill(0).map(()=>String.fromCharCode(e[i++])).join(""),v=e[i++],E=new Array(v).fill(0).map(()=>String.fromCharCode(e[i++])).join(""),G=e[i++],N=new Array(G).fill(0).map(()=>String.fromCharCode(e[i++])).join(""),F=e[i++],A=new Array(F).fill(0).map(()=>String.fromCharCode(e[i++])).join("");return{modelNumber:o,modelName:l,boardType:m,firmwareVersion:V,serialNumber:E,apSsid:N,apMacAddress:A}}function Wt(t){const{data:e}=t;let i=0;const s=e[i++],o=new Array(s).fill(0).map(()=>e[i++]).reduce((p,m)=>(p<<8)+m),d=e[i++],l=new Array(d).fill(0).map(()=>e[i++]).reduce((p,m)=>(p<<8)+m);return{majorVersion:o,minorVersion:l}}const u=[{id:0,label:"False"},{id:1,label:"True"}],Ht={id:1,label:"Internal camera present",description:"Is the internal camera present?",type:"boolean",values:u},Kt={id:2,label:"Internal battery level",description:"Rough approximation of internal battery level in bars",type:"integer",values:[{id:0,label:"Zero"},{id:1,label:"One"},{id:2,label:"Two"},{id:3,label:"Three"}]},Ut={id:3,label:"External battery present",description:"Is an external battery connected?",type:"boolean",values:u},qt={id:4,label:"External battery level",description:"External battery power level in percent",type:"percent",values:[{id:0,label:"0%"},{id:100,label:"100%"}]},jt={id:6,label:"System hot",description:"Is the system currently overheating?",type:"boolean",values:u},Le={id:8,label:"System busy",description:"Is the camera busy?",type:"boolean",values:u},$t={id:9,label:"Quick capture active",description:"Is Quick Capture feature enabled?",type:"boolean",values:u},oe={id:10,label:"Encoding active",description:"Is the system encoding right now?",type:"boolean",values:u},zt={id:11,label:"Lcd lock active",description:"Is LCD lock active?",type:"boolean",values:u},De={id:13,label:"Video progress counter",description:"When encoding video, this is the duration (seconds) of the video so far; 0 otherwise",type:"integer",values:[{id:0,label:"0s"},{id:59,label:"59s"}]},Zt={id:17,label:"Enable",description:"Are Wireless Connections enabled?",type:"boolean",values:u},Yt={id:19,label:"State",description:"The pairing state of the camera",type:"integer",values:[{id:0,label:"Success"},{id:1,label:"In Progress"},{id:2,label:"Failed"},{id:3,label:"Stopped"}]},Xt={id:20,label:"Type",description:"The last type of pairing that the camera was engaged in",type:"integer",values:[{id:0,label:"Not Pairing"},{id:1,label:"Pairing App"},{id:2,label:"Pairing Remote Control"},{id:3,label:"Pairing Bluetooth Device"}]},Jt={id:21,label:"Pair time",description:"Time (milliseconds) since boot of last successful pairing complete action",type:"integer",values:[]},Qt={id:22,label:"State",description:"State of current scan for WiFi Access Points. Appears to only change for CAH-related scans",type:"integer",values:[{id:0,label:"Never started"},{id:1,label:"Started"},{id:2,label:"Aborted"},{id:3,label:"Canceled"},{id:4,label:"Completed"}]},ei={id:23,label:"Scan time msec",description:"The time, in milliseconds since boot that the WiFi Access Point scan completed",type:"integer",values:[]},ti={id:24,label:"Provision status",description:"WiFi AP provisioning state",type:"integer",values:[{id:0,label:"Never started"},{id:1,label:"Started"},{id:2,label:"Aborted"},{id:3,label:"Canceled"},{id:4,label:"Completed"}]},ii={id:26,label:"Remote control version",description:"Wireless remote control version",type:"integer",values:[]},ai={id:27,label:"Remote control connected",description:"Is a wireless remote control connected?",type:"boolean",values:u},si={id:28,label:"Pairing",description:"Wireless Pairing State",type:"integer",values:[]},oi={id:29,label:"Wlan ssid",description:"Provisioned WIFI AP SSID. On BLE connection, value is big-endian byte-encoded int",type:"string",values:[]},ni={id:30,label:"Ap ssid",description:"Camera's WIFI SSID. On BLE connection, value is big-endian byte-encoded int",type:"string",values:[]},li={id:31,label:"App count",description:"The number of wireless devices connected to the camera",type:"integer",values:[]},ri={id:32,label:"Enable",description:"Is Preview Stream enabled?",type:"boolean",values:u},ci={id:33,label:"Sd status",description:"Primary Storage Status",type:"integer",values:[{id:-1,label:"Unknown"},{id:0,label:"OK"},{id:1,label:"SD Card Full"},{id:2,label:"SD Card Removed"},{id:3,label:"SD Card Format Error"},{id:4,label:"SD Card Busy"},{id:8,label:"SD Card Swapped"}]},di={id:34,label:"Remaining photos",description:"How many photos can be taken before sdcard is full",type:"integer",values:[]},ui={id:35,label:"Remaining video time",description:"How many minutes of video can be captured with current settings before sdcard is full",type:"integer",values:[]},pi={id:36,label:"Num group photos",description:"How many group photos can be taken with current settings before sdcard is full",type:"integer",values:[]},hi={id:37,label:"Num group videos",description:"Total number of group videos on sdcard",type:"integer",values:[]},bi={id:38,label:"Num total photos",description:"Total number of photos on sdcard",type:"integer",values:[]},gi={id:39,label:"Num total videos",description:"Total number of videos on sdcard",type:"integer",values:[]},mi={id:40,label:"Date time",description:"Current date/time (format: %YY%MM%DD%HH%MM%SS, all values in hex)",type:"string",values:[]},vi={id:41,label:"Ota status",description:"The current status of Over The Air (OTA) update",type:"integer",values:[{id:0,label:"Idle"},{id:1,label:"Downloading"},{id:2,label:"Verifying"},{id:3,label:"Download Failed"},{id:4,label:"Verify Failed"},{id:5,label:"Ready"},{id:6,label:"GoPro App: Downloading"},{id:7,label:"GoPro App: Verifying"},{id:8,label:"GoPro App: Download Failed"},{id:9,label:"GoPro App: Verify Failed"},{id:10,label:"GoPro App: Ready"}]},fi={id:42,label:"Download cancel request pending",description:"Is there a pending request to cancel a firmware update download?",type:"boolean",values:u},yi={id:45,label:"Camera locate active",description:"Is locate camera feature active?",type:"boolean",values:u},wi={id:49,label:"Multi shot count down",description:"The current timelapse interval countdown value (e.g. 5...4...3...2...1...)",type:"integer",values:[]},Si={id:54,label:"Remaining space",description:"Remaining space on the sdcard in Kilobytes",type:"integer",values:[]},Ci={id:55,label:"Supported",description:"Is preview stream supported in current recording/flatmode/secondary-stream?",type:"boolean",values:u},Pi={id:56,label:"Wifi bars",description:"WiFi signal strength in bars",type:"integer",values:[]},Li={id:57,label:"Current time msec",description:"System time in milliseconds since system was booted",type:"integer",values:[]},Di={id:58,label:"Num hilights",description:"The number of hilights in encoding video (set to 0 when encoding stops)",type:"integer",values:[]},Ai={id:59,label:"Last hilight time msec",description:"Time since boot (msec) of most recent hilight in encoding video (set to 0 when encoding stops)",type:"integer",values:[]},Mi={id:60,label:"Next poll msec",description:"The min time between camera status updates (msec). Do not poll for status more often than this",type:"integer",values:[]},Ti={id:63,label:"In contextual menu",description:"Is the camera currently in a contextual menu (e.g. Preferences)?",type:"boolean",values:u},ki={id:64,label:"Remaining timelapse time",description:"How many min of Timelapse video can be captured with current settings before sdcard is full",type:"integer",values:[]},Ri={id:65,label:"Exposure select type",description:"Liveview Exposure Select Mode",type:"integer",values:[{id:0,label:"Disabled"},{id:1,label:"Auto"},{id:2,label:"ISO Lock"},{id:3,label:"Hemisphere"}]},xi={id:66,label:"Exposure select x",description:"Liveview Exposure Select: x-coordinate (percent)",type:"percent",values:[{id:0,label:"0%"},{id:100,label:"100%"}]},Oi={id:67,label:"Exposure select y",description:"Liveview Exposure Select: y-coordinate (percent)",type:"percent",values:[{id:0,label:"0%"},{id:100,label:"100%"}]},Bi={id:68,label:"Gps status",description:"Does the camera currently have a GPS lock?",type:"boolean",values:u},Ae={id:69,label:"Ap state",description:"Is the WiFi radio enabled?",type:"boolean",values:u},Me={id:70,label:"Internal battery percentage",description:"Internal battery level (percent)",type:"percent",values:[{id:0,label:"0%"},{id:100,label:"100%"}]},Ii={id:74,label:"Acc mic status",description:"Microphone Accesstory status",type:"integer",values:[{id:0,label:"Microphone mod not connected"},{id:1,label:"Microphone mod connected"},{id:2,label:"Microphone mod connected and microphone plugged into Microphone mod"}]},Vi={id:75,label:"Digital zoom",description:"Digital Zoom level (percent)",type:"percent",values:[{id:0,label:"0%"},{id:100,label:"100%"}]},Ei={id:76,label:"Wireless band",description:"Wireless Band",type:"integer",values:[{id:0,label:"2.4 GHz"},{id:1,label:"5 GHz"},{id:2,label:"Max"}]},Gi={id:77,label:"Digital zoom active",description:"Is Digital Zoom feature available?",type:"boolean",values:u},Ni={id:78,label:"Mobile friendly video",description:"Are current video settings mobile friendly? (related to video compression and frame rate)",type:"boolean",values:u},Fi={id:79,label:"First time use",description:"Is the camera currently in First Time Use (FTU) UI flow?",type:"boolean",values:u},_i={id:81,label:"Band 5ghz avail",description:"Is 5GHz wireless band available?",type:"boolean",values:u},ne={id:82,label:"System ready",description:"Is the system ready to accept commands?",type:"boolean",values:u},Wi={id:83,label:"Batt okay for ota",description:"Is the internal battery charged sufficiently to start Over The Air (OTA) update?",type:"boolean",values:u},Hi={id:85,label:"Video low temp alert",description:"Is the camera getting too cold to continue recording?",type:"boolean",values:u},Ki={id:86,label:"Actual orientation",description:"The rotational orientation of the camera",type:"integer",values:[{id:0,label:"0 degrees (upright)"},{id:1,label:"180 degrees (upside down)"},{id:2,label:"90 degrees (laying on right side)"},{id:3,label:"270 degrees (laying on left side)"}]},Ui={id:87,label:"Thermal mitigation mode",description:"Can camera use high resolution/fps (based on temperature)? (HERO7 Silver/White only)",type:"boolean",values:u},qi={id:88,label:"Zoom while encoding",description:"Is this camera capable of zooming while encoding (static value based on model, not settings)",type:"boolean",values:u},ji={id:89,label:"Current mode",description:"Current flatmode ID",type:"integer",values:[]},$i={id:91,label:"Logs ready",description:"Are system logs ready to be downloaded?",type:"boolean",values:u},zi={id:92,label:"Timewarp 1x active",description:"Is Timewarp 1x active?",type:"boolean",values:u},Zi={id:93,label:"Active video presets",description:"Current Video Preset (ID)",type:"integer",values:[]},Yi={id:94,label:"Active photo presets",description:"Current Photo Preset (ID)",type:"integer",values:[]},Xi={id:95,label:"Active timelapse presets",description:"Current Timelapse Preset (ID)",type:"integer",values:[]},Ji={id:96,label:"Active presets group",description:"Current Preset Group (ID)",type:"integer",values:[]},Qi={id:97,label:"Active preset",description:"Current Preset (ID)",type:"integer",values:[]},ea={id:98,label:"Preset modified",description:"Preset Modified Status, which contains an event ID and a preset (group) ID",type:"integer",values:[]},ta={id:99,label:"Remaining live bursts",description:"How many Live Bursts can be captured before sdcard is full",type:"integer",values:[]},ia={id:100,label:"Num total live bursts",description:"Total number of Live Bursts on sdcard",type:"integer",values:[]},aa={id:101,label:"Capture delay active",description:"Is Capture Delay currently active (i.e. counting down)?",type:"boolean",values:u},sa={id:102,label:"Media mod mic status",description:"Media mod State",type:"integer",values:[{id:0,label:"Media mod microphone removed"},{id:2,label:"Media mod microphone only"},{id:3,label:"Media mod microphone with external microphone"}]},oa={id:103,label:"Timewarp speed ramp active",description:"Time Warp Speed",type:"integer",values:[{id:0,label:"15x"},{id:1,label:"30x"},{id:2,label:"60x"},{id:3,label:"150x"},{id:4,label:"300x"},{id:5,label:"900x"},{id:6,label:"1800x"},{id:7,label:"2x"},{id:8,label:"5x"},{id:9,label:"10x"},{id:10,label:"Auto"},{id:11,label:"1x (realtime)"},{id:12,label:"1/2x (slow-motion)"}]},na={id:104,label:"Linux core active",description:"Is the system's Linux core active?",type:"boolean",values:u},la={id:105,label:"Camera lens type",description:"Camera lens type (reflects changes to setting 162)",type:"integer",values:[{id:0,label:"Default"},{id:1,label:"Max Lens"}]},ra={id:106,label:"Video hindsight capture active",description:"Is Video Hindsight Capture Active?",type:"boolean",values:u},ca={id:107,label:"Scheduled preset",description:"Scheduled Capture Preset ID",type:"integer",values:[]},da={id:108,label:"Scheduled enabled",description:"Is Scheduled Capture set?",type:"boolean",values:u},ua={id:109,label:"Creating preset",description:"Is the camera in the process of creating a custom preset?",type:"boolean",values:u},pa={id:110,label:"Media mod status",description:"Media Mode Status (bitmasked)",type:"integer",values:[{id:0,label:"Display (selfie) mod: 0, HDMI: 0, Media Mod Connected: False"},{id:1,label:"Display (selfie) mod: 0, HDMI: 0, Media Mod Connected: True"},{id:2,label:"Display (selfie) mod: 0, HDMI: 1, Media Mod Connected: False"},{id:3,label:"Display (selfie) mod: 0, HDMI: 1, Media Mod Connected: True"},{id:4,label:"Display (selfie) mod: 1, HDMI: 0, Media Mod Connected: False"},{id:5,label:"Display (selfie) mod: 1, HDMI: 0, Media Mod Connected: True"},{id:6,label:"Display (selfie) mod: 1, HDMI: 1, Media Mod Connected: False"},{id:7,label:"Display (selfie) mod: 1, HDMI: 1, Media Mod Connected: True"}]},ha={id:113,label:"Turbo transfer",description:"Is Turbo Transfer active?",type:"boolean",values:u},ba=[Ht,Kt,Ut,qt,jt,Le,$t,oe,zt,De,Zt,Yt,Xt,Jt,Qt,ei,ti,ii,ai,si,oi,ni,li,ri,ci,di,ui,pi,hi,bi,gi,mi,vi,fi,yi,wi,Si,Ci,Pi,Li,Di,Ai,Mi,Ti,ki,Ri,xi,Oi,Bi,Ae,Me,Ii,Vi,Ei,Gi,Ni,Fi,_i,ne,Wi,Hi,Ki,Ui,qi,ji,$i,zi,Zi,Yi,Xi,Ji,Qi,ea,ta,ia,aa,sa,oa,na,la,ra,ca,da,ua,pa,ha],ga={settings:{},statuses:{},isFetching:!1},S=Se({name:"goproSettings",initialState:ga,reducers:{settingsReceived:(t,e)=>{t.settings=W(W({},t.settings),e.payload)},settingsRequested:t=>{t.isFetching=!0},settingsRequestFailed:t=>{t.isFetching=!1},statusesReceived:(t,e)=>{t.statuses=W(W({},t.statuses),e.payload)}}}),ma=S.reducer;n("goproSettings/fetchSettings",async()=>{const{characteristics:t}=g;if(!t)throw new Error("no characteristics");const{queryCharacteristic:e}=t;await e.writeValue(new Uint8Array([1,18]))});function va(t){return e=>{const i=fa(e);Ca(t,i)}}function fa(t){if(t.length<2)throw new Error("command response too short");const e=t[0],i=Sa(t[1]),s=ya(t.slice(2));return{queryId:e,errorCode:i,statusesOrSettings:s}}function ya(t){const e=[];let i=0;for(;i<t.length;){const s=wa(t.slice(i));e.push(s),i+=s.value.length+2}return e}function wa(t){const e=t[0],i=t[1],s=t.slice(2,i+2);return{id:e,length:i,value:s}}function Sa(t){switch(t){case 0:return x.success;case 1:return x.error;case 2:return x.invalidParameter;default:return x.unknown}}var x;(function(t){t[t.unknown=0]="unknown",t[t.success=1]="success",t[t.error=2]="error",t[t.invalidParameter=3]="invalidParameter"})(x||(x={}));var Te;(function(t){t[t.getSettingValue=18]="getSettingValue",t[t.getStatusValue=19]="getStatusValue",t[t.registerForSettingUpdates=82]="registerForSettingUpdates",t[t.registerForStatusUpdates=83]="registerForStatusUpdates",t[t.unregisterForSettingUpdates=114]="unregisterForSettingUpdates",t[t.unregisterForStatusUpdates=115]="unregisterForStatusUpdates",t[t.settingUpdate=146]="settingUpdate",t[t.statusUpdate=147]="statusUpdate"})(Te||(Te={}));const le=t=>t.reduce((e,i)=>{if(i.value.length===0)return e;const s=i.value.reduce((d,l)=>(d<<8)+l),{length:o}=i;return e[i.id]={value:s,length:o},e},{}),re=t=>t.reduce((e,i)=>{const s=i.value.length,o=ba.find(l=>l.id===i.id);if((o==null?void 0:o.type)==="string"||s>4){const l=i.value.map(p=>String.fromCharCode(p)).join("");return e[i.id]=l,e}if(i.value.length===0)return e;const d=i.value.reduce((l,p)=>(l<<8)+p);return e[i.id]=d,e},{});function Ca(t,e){switch(e.queryId){case 18:t(S.actions.settingsReceived(le(e.statusesOrSettings)));break;case 82:t(S.actions.settingsReceived(le(e.statusesOrSettings)));break;case 146:t(S.actions.settingsReceived(le(e.statusesOrSettings)));break;case 19:t(S.actions.statusesReceived(re(e.statusesOrSettings)));break;case 83:t(S.actions.statusesReceived(re(e.statusesOrSettings)));break;case 147:t(S.actions.statusesReceived(re(e.statusesOrSettings)));break}}function Pa(t){return e=>{}}function ce(t){let e=[],i=0;return s=>{const o=s.target;async function d(){const{value:l}=o;if(!l)throw new Error("This should not be possible, empty response value");const p=La(l);if(p.header.isStart?(i=p.header.messageLength,e=p.data):e.push(...p.data),e.length===i)return e;if(e.length>i)throw new Error("Did response messages get out of sync?")}d().then(l=>{!l||(t(l),console.log("packet dump",l))}).catch(l=>{H(`Error while parsing response message ${l}`)})}}function La(t){const e=Da(t),i=Array.from(new Uint8Array(t.buffer)).slice(e.headerSizeBytes);return{header:e,data:i}}function Da(t){const e=t.getUint8(0);let i=1;if(!((e&128)>>7==0)){const l=e&127;return{isStart:!1,headerSizeBytes:1,continuationIndex:l}}const o=(e&96)>>5;let d;if(o===0)d=e&31;else if(o===1){i=2;const l=t.getUint8(1);d=(e&31)<<8|l}else if(o===2){i=3;const l=t.getUint8(1),p=t.getUint8(2);d=l<<8|p}else if(o===3)d=0;else throw new Error("IMPOSSIBLE");return{isStart:!0,headerSizeBytes:i,messageLength:d}}const Z=n("bluetoothDevice/requestDevice",async(t,{dispatch:e})=>{var s;const i=await navigator.bluetooth.requestDevice({filters:[{services:["0000fea6-0000-1000-8000-00805f9b34fb"]}],optionalServices:["0000fea6-0000-1000-8000-00805f9b34fb","b5f90001-aa8d-11e3-9046-0002a5d5c51b"]});return i.ongattserverdisconnected=()=>{g.characteristics=void 0,g.gattServer=void 0,e(q.actions.gattDisconnected("Connection lost")),H.error("Gopro disconnected, connection lost")},g.device=i,e(U()),{deviceName:(s=i.name)!=null?s:i.id}}),U=n("bluetoothDevice/gattConnect",async(t,{dispatch:e})=>{var A;const{device:i}=g;if(!i)throw new Error("device not found to connect to");if(!(i==null?void 0:i.gatt))throw new Error(`gatt missing for this device ${(A=i.name)!=null?A:i.id}`);const s=await i.gatt.connect(),o=s.getPrimaryService("b5f90001-aa8d-11e3-9046-0002a5d5c51b"),d=o.then(b=>b.getCharacteristic("b5f90002-aa8d-11e3-9046-0002a5d5c51b")),l=o.then(b=>b.getCharacteristic("b5f90003-aa8d-11e3-9046-0002a5d5c51b")),p=o.then(b=>b.getCharacteristic("b5f90004-aa8d-11e3-9046-0002a5d5c51b")),m=o.then(b=>b.getCharacteristic("b5f90005-aa8d-11e3-9046-0002a5d5c51b")),f=s.getPrimaryService("0000fea6-0000-1000-8000-00805f9b34fb"),V=f.then(b=>b.getCharacteristic("b5f90072-aa8d-11e3-9046-0002a5d5c51b")),v=f.then(b=>b.getCharacteristic("b5f90073-aa8d-11e3-9046-0002a5d5c51b")),E=f.then(b=>b.getCharacteristic("b5f90074-aa8d-11e3-9046-0002a5d5c51b")),G=f.then(b=>b.getCharacteristic("b5f90075-aa8d-11e3-9046-0002a5d5c51b")),N=f.then(b=>b.getCharacteristic("b5f90076-aa8d-11e3-9046-0002a5d5c51b")),F=f.then(b=>b.getCharacteristic("b5f90077-aa8d-11e3-9046-0002a5d5c51b"));g.gattServer=s,g.characteristics={wifiApSsidCharacteristic:await d,wifiApPasswordCharacteristic:await l,wifiApPowerCharacteristic:await p,wifiApStateCharacteristic:await m,commandCharacteristic:await V,commandResponseCharacteristic:await v,settingsCharacteristic:await E,settingsResponseCharacteristic:await G,queryCharacteristic:await N,queryResponseCharacteristic:await F},g.characteristics.commandResponseCharacteristic.oncharacteristicvaluechanged=ce(Et(e)),await g.characteristics.commandResponseCharacteristic.startNotifications(),g.characteristics.queryResponseCharacteristic.oncharacteristicvaluechanged=ce(va(e)),await g.characteristics.queryResponseCharacteristic.startNotifications(),g.characteristics.settingsResponseCharacteristic.oncharacteristicvaluechanged=ce(Pa()),await g.characteristics.settingsResponseCharacteristic.startNotifications(),await e(ke([ne.id,oe.id,Le.id])),await e(ke([...new Array(88).keys()])),await e(Ta([...new Array(112).keys()])),await e(pe()),await e(ue())});async function Aa(t,e){return t.writeValue(new Uint8Array(e))}function Ma(t,e){if(e>0)return[128+(e&63)];if(t<=31)return[t&31];if(t<=8191)return[32+(t>>8&31),t&255];if(t<=65535)return[64,t>>8&255,t&255];throw H.error("packet too large"),new Error("data length too large")}async function de(t,e){console.log("writing data, before appending headers",e);const i=[...e];let s=0;for(;i.length>0;){i.unshift(...Ma(e.length,s));const o=i.splice(0,20);await Aa(t,o),s++}}const Ta=n("bluetoothDevice/subscribeToSettingsChanges",async t=>{const{characteristics:e}=g;if(!e)throw new Error("no characteristics");const{queryCharacteristic:i}=e;await de(i,[82,...t])}),ke=n("bluetoothDevice/subscribeToStatusChanges",async t=>{const{characteristics:e}=g;if(!e)throw new Error("no characteristics");const{queryCharacteristic:i}=e;await de(i,[83,...t])}),ka=n("bluetoothDevice/tempSettingsDump",async()=>{const{characteristics:t}=g;if(!t)throw new Error("no characteristics");const{queryCharacteristic:e}=t;await e.writeValue(new Uint8Array([1,18]))}),Ra=n("bluetoothDevice/tempStatusesDump",async()=>{const{characteristics:t}=g;if(!t)throw new Error("no characteristics");const{queryCharacteristic:e}=t;await e.writeValue(new Uint8Array([1,19]))}),Re=[];async function xe(t,e){let i=Re.find(s=>s.context===e);i||(i={context:e,promise:Promise.resolve()},Re.push(i)),i.promise=i.promise.then(()=>t()),await i.promise}function Oe(){const{statuses:t}=he.getState().goproSettingsReducer;return t[ne.id]}async function xa(){Oe()||await new Promise(t=>{const e=he.subscribe(()=>{Oe()&&(e(),t())})})}async function Oa(t){const{characteristics:e}=g;if(!e)throw new Error("no characteristics");const{commandCharacteristic:i}=e;await xa(),await xe(async()=>{await de(i,t)},i)}const r=n("bluetoothDevice/goproSleepCommand",async t=>{await Oa(t)}),Ba=n("bluetoothDevice/goproForceShutdownCommand",async(t,{dispatch:e})=>{await e(r([4]))}),Ia=n("bluetoothDevice/goproHiLightTagCommand",async(t,{dispatch:e})=>{await e(r([24]))}),Va=n("bluetoothDevice/goproLocateOnCommand",async(t,{dispatch:e})=>{await e(r([22,1,1]))}),Ea=n("bluetoothDevice/goproLocateOffCommand",async(t,{dispatch:e})=>{await e(r([22,1,0]))}),Ga=n("bluetoothDevice/goproLegacyPresetsLoadGroupVideoCommand",async(t,{dispatch:e})=>{await e(r([2,1,0]))}),Na=n("bluetoothDevice/goproLegacyPresetsLoadGroupPhotoCommand",async(t,{dispatch:e})=>{await e(r([2,1,1]))}),Fa=n("bluetoothDevice/goproLegacyPresetsLoadGroupMultishotCommand",async(t,{dispatch:e})=>{await e(r([2,1,2]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetVideoCommand",async(t,{dispatch:e})=>{await e(r([3,1,0,1,0]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetTimeLapseVideoCommand",async(t,{dispatch:e})=>{await e(r([3,1,0,1,1]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetLoopingVideoCommand",async(t,{dispatch:e})=>{await e(r([3,1,0,1,3]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetTimewarpCommand",async(t,{dispatch:e})=>{await e(r([3,1,0,1,4]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetPhotoCommand",async(t,{dispatch:e})=>{await e(r([3,1,1,1,1]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetNightPhotoCommand",async(t,{dispatch:e})=>{await e(r([3,1,1,1,2]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetBurstPhotoCommand",async(t,{dispatch:e})=>{await e(r([3,1,2,1,0]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetTimeLapsePhotoCommand",async(t,{dispatch:e})=>{await e(r([3,1,2,1,1]))});n("bluetoothDevice/goproLegacyPresetsLoadPresetNightLapsePhotoCommand",async(t,{dispatch:e})=>{await e(r([3,1,2,1,2]))});const Be=n("bluetoothDevice/goproSleepCommand",async(t,{dispatch:e})=>{await e(r([5]))}),ue=n("bluetoothDevice/getHardwareInfoCommand",async(t,{dispatch:e})=>{await e(r([60]))}),Ie=n("bluetoothDevice/setShutterOffCommand",async(t,{dispatch:e})=>{await e(r([1,1,0]))}),Ve=n("bluetoothDevice/setShutterOnCommand",async(t,{dispatch:e})=>{await e(r([1,1,1]))}),Ee=n("bluetoothDevice/apControlWiFiApOff",async(t,{dispatch:e})=>{await e(r([23,1,0]))}),Ge=n("bluetoothDevice/apControlWiFiApOn",async(t,{dispatch:e})=>{await e(r([23,1,1]))}),_a=n("bluetoothDevice/presetsLoadGroupVideo",async(t,{dispatch:e})=>{await e(r([62,2,3,232]))}),Wa=n("bluetoothDevice/presetsLoadGroupPhoto",async(t,{dispatch:e})=>{await e(r([62,2,3,233]))}),Ha=n("bluetoothDevice/presetsLoadGroupTimelapse",async(t,{dispatch:e})=>{await e(r([62,2,3,234]))}),Ka=n("bluetoothDevice/presetsLoadStandard",async(t,{dispatch:e})=>{await e(r([64,4,0,0,0,0]))}),Ua=n("bluetoothDevice/presetsLoadActivity",async(t,{dispatch:e})=>{await e(r([64,4,0,0,0,1]))}),qa=n("bluetoothDevice/presetsLoadCinematic",async(t,{dispatch:e})=>{await e(r([64,4,0,0,0,2]))}),ja=n("bluetoothDevice/presetsLoadUltraSloMo",async(t,{dispatch:e})=>{await e(r([64,4,0,0,0,4]))}),$a=n("bluetoothDevice/presetsLoadBasic",async(t,{dispatch:e})=>{await e(r([64,4,0,0,0,5]))}),za=n("bluetoothDevice/presetsLoadPhoto",async(t,{dispatch:e})=>{await e(r([64,4,0,1,0,0]))}),Za=n("bluetoothDevice/presetsLoadLiveBurst",async(t,{dispatch:e})=>{await e(r([64,4,0,1,0,1]))}),Ya=n("bluetoothDevice/presetsLoadBurstPhoto",async(t,{dispatch:e})=>{await e(r([64,4,0,1,0,2]))}),Xa=n("bluetoothDevice/presetsLoadNightPhoto",async(t,{dispatch:e})=>{await e(r([64,4,0,1,0,3]))}),Ja=n("bluetoothDevice/presetsLoadTimeWarp",async(t,{dispatch:e})=>{await e(r([64,4,0,2,0,0]))}),Qa=n("bluetoothDevice/presetsLoadTimeLapse",async(t,{dispatch:e})=>{await e(r([64,4,0,2,0,1]))}),es=n("bluetoothDevice/presetsLoadNightLapse",async(t,{dispatch:e})=>{await e(r([64,4,0,2,0,2]))}),ts=n("bluetoothDevice/presetsLoadStandardEB",async(t,{dispatch:e})=>{await e(r([64,4,0,8,0,0]))}),is=n("bluetoothDevice/presetsLoadActivityEB",async(t,{dispatch:e})=>{await e(r([64,4,0,8,0,1]))}),as=n("bluetoothDevice/presetsLoadCinematicEB",async(t,{dispatch:e})=>{await e(r([64,4,0,8,0,2]))}),ss=n("bluetoothDevice/presetsLoadSloMoEB",async(t,{dispatch:e})=>{await e(r([64,4,0,8,0,3]))}),os=n("bluetoothDevice/presetsLoad4KTripod",async(t,{dispatch:e})=>{await e(r([64,4,0,9,0,0]))}),ns=n("bluetoothDevice/presetsLoad53KTripod",async(t,{dispatch:e})=>{await e(r([64,4,0,9,0,1]))}),ls=n("bluetoothDevice/analyticsSetThirdPartyClient",async(t,{dispatch:e})=>{await e(r([80]))}),pe=n("bluetoothDevice/openGoProGetVersion",async(t,{dispatch:e})=>{await e(r([81]))}),rs={isRequestingDevice:!1,isDeviceSelected:!1,gattConnected:!1,isGattConnecting:!1,deviceName:"unknown",goproBluetoothDeviceCommandsState:{isCommandInAction:!1}},q=Se({name:"bluetoothDevice",initialState:rs,reducers:{gattDisconnected:(t,e)=>{t.gattConnected=!1,t.error=e.payload},getHardwareInfoResponse:(t,e)=>{t.goproBluetoothDeviceCommandsState.getHardwareInfo=e.payload,t.deviceName=e.payload.apSsid},openGoProGetVersionResponse:(t,e)=>{t.goproBluetoothDeviceCommandsState.openGoProVersion=e.payload}},extraReducers:t=>{t.addCase(Z.pending,e=>{g.device=void 0,e.isRequestingDevice=!0,e.isDeviceSelected=!1,e.error=void 0}),t.addCase(Z.fulfilled,(e,i)=>{e.isRequestingDevice=!1,e.isDeviceSelected=!0,e.error=void 0,e.deviceName=i.payload.deviceName}),t.addCase(Z.rejected,(e,i)=>{var s;g.device=void 0,e.isRequestingDevice=!1,e.isDeviceSelected=!1,e.error=(s=i.error.message)!=null?s:"unknown error"}),t.addCase(U.pending,e=>{e.isGattConnecting=!0,e.gattConnected=!1}),t.addCase(U.fulfilled,e=>{e.isGattConnecting=!1,e.gattConnected=!0}),t.addCase(U.rejected,(e,i)=>{var s;e.isGattConnecting=!1,e.gattConnected=!1,e.error=(s=i.error.message)!=null?s:"unknown error"})}}),cs=q.reducer,he=ot({reducer:{goproBluetoothReducer:cs,goproSettingsReducer:ma},devTools:!0}),Y={id:2,label:"Resolution",length:1,values:[{id:18,label:"4K (4:3)"},{id:6,label:"2.7K (4:3)"},{id:7,label:"1440 (4:3)"},{id:10,label:"960 (4:3)"},{id:1,label:"4K"},{id:4,label:"2.7K"},{id:9,label:"1080"},{id:12,label:"720"}]},Ne={id:3,label:"FPS",length:1,values:[{id:0,label:"240"},{id:1,label:"120"},{id:5,label:"60"},{id:8,label:"30"},{id:10,label:"24"}]},X={id:4,label:"FOV",length:1,values:[{id:4,label:"Linear"},{id:0,label:"Wide"},{id:3,label:"Super view"}]},Fe={id:8,label:"Low light",length:1,values:[{id:0,label:"Off"},{id:1,label:"Auto"}]},C={id:10,label:"Protune",length:1,values:[{id:0,label:"Off"},{id:1,label:"On"}]},P={id:11,label:"White Balance",length:1,values:[{id:0,label:"Auto"},{id:8,label:"2300K"},{id:9,label:"2800K"},{id:10,label:"3200K"},{id:5,label:"4000K"},{id:11,label:"4500K"},{id:12,label:"5000K"},{id:2,label:"5500K"},{id:7,label:"6000K"},{id:3,label:"6500K"},{id:4,label:"Native"}]},J={id:12,label:"Color",length:1,values:[{id:0,label:"GoPro"},{id:1,label:"Flat"}]},Q={id:13,label:"ISO max",length:1,values:[{id:0,label:"6400"},{id:3,label:"3200"},{id:1,label:"1600"},{id:4,label:"800"},{id:2,label:"400"},{id:7,label:"200"},{id:8,label:"100"}]},L={id:14,label:"Sharpness",length:1,values:[{id:0,label:"High"},{id:1,label:"Medium"},{id:2,label:"Low"}]},D={id:15,label:"EV comp",length:1,values:[{id:0,label:"+2"},{id:1,label:"+1.5"},{id:2,label:"+1"},{id:3,label:"+0.5"},{id:4,label:"0"},{id:5,label:"-0.5"},{id:6,label:"-1"},{id:7,label:"-1.5"},{id:8,label:"-2"}]},ds={id:73,label:"Shutter",length:1,values:[{id:0,label:"Auto"},{id:8,label:"1/60"},{id:13,label:"1/120"},{id:18,label:"1/240"},{id:22,label:"1/480"},{id:23,label:"1/960"}]},_e={id:78,label:"Stabilization",length:1,values:[{id:0,label:"Off"},{id:1,label:"Auto"}]},us={id:80,label:"Microphone",length:1,values:[{id:2,label:"Auto"},{id:1,label:"Wind"},{id:0,label:"Stereo"}]},ps={id:81,label:"Raw audio",length:1,values:[{id:3,label:"Off"},{id:0,label:"Low"},{id:1,label:"Medium"},{id:2,label:"High"}]},We={id:102,label:"ISO min",length:Q.length,values:Q.values},hs={id:107,label:"Video Timer",length:1,values:[{id:0,label:"Off"},{id:1,label:"15s"},{id:2,label:"30s"}]},bs={id:108,label:"Resolution format",length:1,values:[{id:0,label:"4:3"},{id:1,label:"16:9"}]},He=[Y,Ne,X,Fe,_e,C,ds,D,P,We,Q,L,J,ps,us,hs,bs],gs={id:6,label:"Interval",length:1,values:[{id:0,label:"MAX"},{id:1,label:"5m"},{id:2,label:"20m"},{id:3,label:"60m"},{id:4,label:"120m"}]},ms=[Y,Ne,X,gs,Fe,_e],vs={id:111,label:"Speed",length:1,values:[{id:0,label:"15x"},{id:1,label:"30x"},{id:7,label:"2x"},{id:8,label:"5x"},{id:9,label:"10x"}]},fs=[Y,vs,X],ys={id:5,label:"Interval",length:1,values:[{id:0,label:"0.5s"},{id:1,label:"1s"},{id:2,label:"2s"},{id:3,label:"5s"},{id:4,label:"10s"},{id:5,label:"30s"},{id:6,label:"60s"}]},ws=[Y,X,ys],Ss={id:30,label:"Interval",length:1,values:[{id:0,label:"0.5s"},{id:1,label:"1s"},{id:2,label:"2s"},{id:5,label:"5s"},{id:10,label:"10s"},{id:30,label:"30s"},{id:60,label:"60s"}]},O={id:28,label:"FOV",length:1,values:[{id:0,label:"Wide"},{id:10,label:"Linear"}]},Ke={id:39,label:D.label,length:D.length,values:D.values},be={id:35,label:P.label,length:P.length,values:P.values},w={id:76,label:We.label,length:1,values:[{id:0,label:"800"},{id:1,label:"400"},{id:2,label:"200"},{id:3,label:"100"},{id:4,label:"1600"},{id:5,label:"3200"}]},B={id:37,label:Q.label,length:w.length,values:w.values},Ue={id:38,label:L.label,length:L.length,values:L.values},j={id:36,label:J.label,length:J.length,values:J.values},ge={id:34,label:C.label,length:C.length,values:C.values},Cs=[Ss,O,Ke,be,w,B,Ue,j,ge],ee={id:31,label:"Shutter",length:1,values:[{id:0,label:"Auto"},{id:6,label:"30s"},{id:5,label:"20s"},{id:4,label:"15s"},{id:3,label:"10s"},{id:2,label:"5s"},{id:1,label:"2s"}]},Ps={id:32,label:"Interval",length:4,values:[{id:(14<<8)+17,label:"Auto"},{id:(0<<8)+4,label:"4s"},{id:(0<<8)+5,label:"5s"},{id:(0<<8)+10,label:"10s"},{id:(0<<8)+20,label:"20s"},{id:(0<<8)+60,label:"1m"},{id:(0<<8)+120,label:"2m"},{id:(1<<8)+44,label:"5m"},{id:(7<<8)+8,label:"30m"},{id:(14<<8)+16,label:"60m"}]},te={id:99,label:"RAW",length:1,values:[{id:0,label:"Off"},{id:1,label:"On"}]},Ls=[w,B,ee,Ps,O,ge,be,te],Ds={id:19,label:ee.label,length:ee.length,values:ee.values},qe={id:17,label:O.label,length:O.length,values:O.values},je={id:26,label:D.label,length:D.length,values:D.values},$e={id:22,label:P.label,length:P.length,values:P.values},ze={id:75,label:w.label,length:w.length,values:w.values},Ze={id:24,label:B.label,length:B.length,values:B.values},Ye={id:25,label:L.label,length:L.length,values:L.values},Xe={id:23,label:j.label,length:j.length,values:j.values},Je={id:21,label:C.label,length:C.length,values:C.values},As={id:98,label:te.label,length:te.length,values:te.values},Ms=[Ds,qe,je,$e,ze,Ze,Ye,Xe,Je,As],Ts={id:29,label:"Burst Rate",length:1,values:[{id:9,label:"Auto"},{id:8,label:"30/6s"},{id:7,label:"30/3s"},{id:6,label:"30/2s"},{id:5,label:"30/1s"},{id:4,label:"10/3s"},{id:3,label:"10/2s"},{id:2,label:"10/1s"},{id:1,label:"5/1s"},{id:0,label:"3/1s"}]},ks=[Ts,O,ge,Ke,be,w,B,Ue,j],Rs={id:109,label:"Super Photo",length:1,values:[{id:0,label:"Off"},{id:1,label:"Auto"},{id:2,label:"HDR On"}]},xs={id:97,label:"Shutter",length:1,values:[{id:0,label:"Auto"},{id:1,label:"1/125"},{id:2,label:"1/250"},{id:3,label:"1/500"},{id:4,label:"1/1000"},{id:5,label:"1/2000"}]},Os=[qe,Rs,Je,xs,je,$e,ze,Ze,Ye,Xe],Bs={id:87,label:"Beeps",length:1,values:[{id:0,label:"Mute"},{id:100,label:"High"},{id:70,label:"Medium"},{id:40,label:"Low"}]},me={id:89,label:"Default Mode",length:1,values:[{id:12,label:"Video"},{id:15,label:"Looping"},{id:17,label:"Photo"},{id:18,label:"Night"},{id:19,label:"Burst"},{id:24,label:"Timewarp Video"},{id:13,label:"Timelapse Video"},{id:20,label:"Timelapse Photo"},{id:21,label:"Nightlapse Photo"}]},Is={id:91,label:"LEDs",length:1,values:[{id:0,label:"All Off"},{id:1,label:"Front Off Only"},{id:2,label:"All On"}]},Vs={id:92,label:"Current Mode",length:me.length,values:me.values},Es={id:106,label:"Video Compression",length:1,values:[{id:0,label:"H264"},{id:1,label:"HEVC"}]},Gs={id:86,label:"Voice Control",length:1,values:[{id:0,label:"Off"},{id:1,label:"On"}]},Ns={id:104,label:"Wake On Voice",length:1,values:[{id:0,label:"Off"},{id:1,label:"On"}]},Fs={id:85,label:"Voice Control Language",length:1,values:[{id:0,label:"English (US)"},{id:1,label:"English (UK)"},{id:13,label:"English (India)"}]},_s={id:112,label:"Touch Display Landscape Lock",length:1,values:[{id:0,label:"Off"},{id:1,label:"Up"},{id:2,label:"Down"}]},Ws={id:51,label:"Touch Display Screen Saver",length:1,values:[{id:1,label:"1min"},{id:2,label:"2min"},{id:3,label:"3min"},{id:0,label:"Never"}]},Hs={id:88,label:"Touch Display Brightness",length:1,values:[{id:100,label:"100%"},{id:80,label:"80%"},{id:10,label:"10%"}]},Ks={id:83,label:"Regional GPS",length:1,values:[{id:0,label:"Off"},{id:1,label:"On"}]},Us={id:84,label:"Regional Language",length:1,values:[{id:0,label:"English"},{id:6,label:"French"}]},qs=[Bs,me,Is,Es,Gs,Ns,Fs,_s,Ws,Hs,Ks,Us];[...He,...ms,...fs,...ws,...Cs,...Ls,...Ms,...ks,...Os,...qs];const ie=()=>nt(),I=lt;async function Qe(t){await xe(async()=>{const{characteristics:e}=g;if(!e)throw new Error("no characteristics");const{settingsCharacteristic:i}=e;await i.writeValue(new Uint8Array(t))},Qe)}const js=n("goproSettings/setSettingValue",async t=>{const e=[];e.push(t.setting.length+2),e.push(t.setting.id),e.push(t.setting.length);for(let i=0;i<t.setting.length;i++)e.push(t.valueId>>i*8&255);await Qe(e)}),et=z()({temp:{display:"flex"}}),$s=()=>{const[t,e]=T.exports.useState(!1),i=()=>e(!1),s=()=>e(!0),[o,d]=T.exports.useState(1);return et(),h(K,{children:[a(zs,{isOpen:t,onClose:i,settings:He}),a(k,{maxWidth:"sm",sx:{width:"fit-content",minWidth:"40vw"},children:a(ae,{elevation:o,onMouseOver:()=>d(3),onMouseOut:()=>d(1),onClick:s,children:h("p",{style:{textAlign:"center"},children:["2.7K|60|W",a("br",{}),"PT, ICON, ICON"]})})})]})},zs=t=>{const{isOpen:e,onClose:i,settings:s}=t;return a(K,{children:h(rt,{open:e,onClose:i,children:[a(ct,{children:"Change current mode settings"}),s.map(o=>a(Zs,{setting:o},o.id)),a("div",{children:"actual view todo"})]})})},Zs=t=>{const e=ie(),{settings:i}=I(l=>l.goproSettingsReducer),{setting:s}=t,o=i[s.id],d=l=>{const p=parseInt(l.target.value,10);e(js({setting:s,valueId:p}))};return et(),o?a(K,{children:h(dt,{variant:"standard",sx:{m:1,minWidth:120},children:[a(ut,{id:"demo-simple-select-standard-label",children:s.label}),a(pt,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:o.value.toString(),onChange:d,label:s.label,children:s.values.map(l=>a(ht,{value:l.id,children:l.label},l.id))})]})}):a("div",{children:"something went wrong... known setting missing"})},Ys=z()({pageWrapper:{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",marginBottom:"1rem"},topControls:{width:"100%"},bottomControls:{width:"100%"},bottomCenteredButtons:{width:"100%",alignSelf:"flex-end",display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row"},alignLeftToRight:{display:"flex"},button:{margin:"0.5rem"},recordButton:{margin:"0.5rem","& svg":{fontSize:"5rem"}},floatLeft:{flex:1},floatRight:{flex:1,display:"flex",alignItems:"center"}});var y;(function(t){t.video="Video",t.photo="Photo",t.timeLapse="Time Lapse"})(y||(y={}));function Xs(t){if(!t)return y.video;switch(t.value){case 12:case 15:return y.video;case 17:case 18:case 19:return y.photo;case 24:case 13:case 20:case 21:return y.timeLapse;default:return y.video}}const tt=()=>{const{classes:t}=Ys(),e=I(_=>_.goproSettingsReducer.statuses),i=I(_=>_.goproSettingsReducer.settings[Vs.id]),s=Xs(i),o=I(_=>_.goproBluetoothReducer.deviceName),d=e[Ae.id]===1,l=e[Me.id],p=e[oe.id]===1,m=e[De.id],f=Math.floor(m/60),V=m%60,v=ie(),E=()=>{v(Be())},G=()=>{v(d?Ee():Ge())},N=()=>{v(Na())},F=()=>{v(Ga())},A=()=>{v(Fa())},b=()=>{v(p?Ie():Ve())};return a(K,{children:a(k,{maxWidth:"sm",sx:{display:"flex",flexGrow:1},children:h(ae,{className:t.pageWrapper,children:[h("div",{className:t.topControls,children:[a("br",{}),h(k,{sx:{width:"fit-content"},children:[a(ae,{sx:{padding:"0.4em"},elevation:2,children:a(M,{variant:"h4",children:o})}),a(se,{onClick:E,children:a(bt,{})}),a(se,{onClick:G,children:d?a(gt,{}):a(mt,{})}),h("p",{children:["Mode: ",s]}),a("p",{children:"Storage left: 07:23"}),h("p",{children:["Battery: ",l,"%"]})]})]}),h("div",{className:t.bottomControls,children:[a($s,{}),h("div",{className:t.bottomCenteredButtons,children:[a(c,{onClick:A,className:t.button,"aria-label":"Timelapse mode",color:s===y.timeLapse?"secondary":"primary",variant:"contained",children:a(vt,{})}),a(c,{onClick:F,className:t.button,"aria-label":"Video mode",color:s===y.video?"secondary":"primary",variant:"contained",children:a(ft,{})}),a(c,{onClick:N,className:t.button,"aria-label":"Photo mode",color:s===y.photo?"secondary":"primary",variant:"contained",children:a(yt,{})})]}),h("div",{className:t.alignLeftToRight,children:[a("div",{className:t.floatLeft}),a("div",{className:t.recordButton,children:a(se,{onClick:b,"aria-label":"Record button",color:"error",children:p?a(wt,{}):a(St,{})})}),a("div",{className:t.floatRight,children:p&&h(M,{variant:"h6",children:[f.toLocaleString(void 0,{minimumIntegerDigits:2}),":",V.toLocaleString(void 0,{minimumIntegerDigits:2})]})})]})]})]})})})},Js=()=>{const t=I(i=>i.goproBluetoothReducer),e=ie();return h(K,{children:[a("div",{children:JSON.stringify(t.goproBluetoothDeviceCommandsState.getHardwareInfo)}),a(c,{onClick:()=>e(Be()),children:"Sleep command"}),a(c,{onClick:()=>e(Ba()),children:"goproForceShutdownCommand"}),a(c,{onClick:()=>e(Ia()),children:"goproHiLightTagCommand"}),a(c,{onClick:()=>e(Va()),children:"goproLocateOnCommand"}),a(c,{onClick:()=>e(Ea()),children:"goproLocateOffCommand"}),a(c,{onClick:()=>e(ue()),children:"Get hardware info command"}),a(c,{onClick:()=>e(Ve()),children:"setShutterOnCommand"}),a(c,{onClick:()=>e(Ie()),children:"setShutterOffCommand"}),a(c,{onClick:()=>e(Ee()),children:"apControlWiFiApOff"}),a(c,{onClick:()=>e(Ge()),children:"apControlWiFiApOn"}),a(c,{onClick:()=>e(_a()),children:"presetsLoadGroupVideo"}),a(c,{onClick:()=>e(Wa()),children:"presetsLoadGroupPhoto"}),a(c,{onClick:()=>e(Ha()),children:"presetsLoadGroupTimelapse"}),a(c,{onClick:()=>e(Ka()),children:"presetsLoadStandard"}),a(c,{onClick:()=>e(Ua()),children:"presetsLoadActivity"}),a(c,{onClick:()=>e(qa()),children:"presetsLoadCinematic"}),a(c,{onClick:()=>e(ja()),children:"presetsLoadUltraSloMo"}),a(c,{onClick:()=>e($a()),children:"presetsLoadBasic"}),a(c,{onClick:()=>e(za()),children:"presetsLoadPhoto"}),a(c,{onClick:()=>e(Za()),children:"presetsLoadLiveBurst"}),a(c,{onClick:()=>e(Ya()),children:"presetsLoadBurstPhoto"}),a(c,{onClick:()=>e(Xa()),children:"presetsLoadNightPhoto"}),a(c,{onClick:()=>e(Ja()),children:"presetsLoadTimeWarp"}),a(c,{onClick:()=>e(Qa()),children:"presetsLoadTimeLapse"}),a(c,{onClick:()=>e(es()),children:"presetsLoadNightLapse"}),a(c,{onClick:()=>e(ts()),children:"presetsLoadStandardEB"}),a(c,{onClick:()=>e(is()),children:"presetsLoadActivityEB"}),a(c,{onClick:()=>e(as()),children:"presetsLoadCinematicEB"}),a(c,{onClick:()=>e(ss()),children:"presetsLoadSloMoEB"}),a(c,{onClick:()=>e(os()),children:"presetsLoad4KTripod"}),a(c,{onClick:()=>e(ns()),children:"presetsLoad53KTripod"}),a(c,{onClick:()=>e(ls()),children:"analyticsSetThirdPartyClient"}),a(c,{onClick:()=>e(pe()),children:"openGoProGetVersion"})]})},Qs=z()({flexContent:{position:"absolute",height:"100%",width:"100%",maxHeight:"-webkit-fill-available",display:"flex",flexDirection:"column"}}),eo=()=>{const{classes:t}=Qs(),e=I(s=>s.goproBluetoothReducer),i=ie();return window.location.protocol==="http:"?a("div",{children:"Bluetooth is not supported for http pages"}):typeof navigator.bluetooth=="undefined"?a("div",{children:"bluetooth not found for this browser"}):e.isDeviceSelected?e.gattConnected?h("div",{className:t.flexContent,children:[a(k,{maxWidth:"sm",children:h($,{sx:{my:4},children:[h(M,{variant:"h4",component:"h1",gutterBottom:!0,children:['Connected to "',e.deviceName,'"']}),a(c,{onClick:()=>i(ka()),children:"settings dump"}),a(c,{onClick:()=>i(Ra()),children:"statuses dump"}),window.allButtons?a(Js,{}):null]})}),a(tt,{})]}):e.isGattConnecting?a("div",{children:"Connecting to bluetooth device"}):a("div",{children:a(k,{maxWidth:"sm",children:h($,{sx:{my:4},children:[h(M,{variant:"h4",component:"h1",gutterBottom:!0,children:["Connect to ",e.deviceName]}),a(c,{onClick:()=>i(U()),children:"Connect"}),e.error?a("div",{children:e.error}):null]})})}):e.isRequestingDevice?a("div",{children:"Select Gopro bluetooth device from prompt"}):h("div",{className:t.flexContent,children:[a(k,{maxWidth:"sm",children:h($,{sx:{my:4},children:[a(M,{variant:"h4",component:"h1",gutterBottom:!0,children:"Search for GoPro"}),a(c,{onClick:()=>i(Z()),children:"Search"}),e.error?a("div",{children:e.error}):null]})}),a(tt,{})]})};const to=()=>{const t=we();return h(Ct,{store:he,children:[a(ye.GlobalStyles,{styles:{body:{margin:0,padding:0}}}),h(Pt,{theme:t,children:[a(It,{}),a(Lt,{}),a(eo,{})]})]})};Dt.render(a(to,{}),document.getElementById("root"));
//# sourceMappingURL=index.6bc6b832.js.map
